<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic usage • rintchron</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Basic usage">
<meta property="og:description" content="rintchron">
<meta property="og:image" content="https://rintchron.joeroe.io/logo.svg">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@joeroe90">
<meta name="twitter:site" content="@joeroe90">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rintchron</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rintchron.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intchron_api.html">IntChron API</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/joeroe/rintchron/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="rintchron_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic usage</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/joeroe/rintchron/blob/master/vignettes/rintchron.Rmd"><code>vignettes/rintchron.Rmd</code></a></small>
      <div class="hidden name"><code>rintchron.Rmd</code></div>

    </div>

    
    
<p><a href="https://intchron.org">IntChron</a> is an indexing service for chronological data such as radiocarbon dates <span class="citation">(Bronk Ramsey et al. 2019)</span>. It specifies a standard exchange format and provides a consistent API for querying databases that use its schema. The rintchron package provides a simple interface for querying these databases with <code><a href="../reference/intchron.html">intchron()</a></code>, explained in this vignette.</p>
<p>The package also includes low level functions for interacting with the IntChron API directly, described in <code>vignette("intchron-api")</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://rintchron.joeroe.io">"rintchron"</a></span><span class="op">)</span></pre></div>
<div id="querying-intchron" class="section level2">
<h2 class="hasAnchor">
<a href="#querying-intchron" class="anchor"></a>Querying IntChron</h2>
<p>Use <code><a href="../reference/intchron.html">intchron()</a></code> to query databases indexed by IntChron. At a minimum, you will need to specify which databases or ‘hosts’ you want to query.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> Use <code><a href="../reference/intchron.html">intchron_hosts()</a></code> to see a list of currently available databases:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="../reference/intchron.html">intchron_hosts</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   host     database                            </span>
<span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;                               </span>
<span class="co">#&gt; 1 egyptdb  Egyptian Radiocarbon Database       </span>
<span class="co">#&gt; 2 intimate INTIMATE Database                   </span>
<span class="co">#&gt; 3 nrcf     NERC Radiocarbon Facility (Oxford)  </span>
<span class="co">#&gt; 4 oxa      Oxford Radiocarbon Accelerator Unit </span>
<span class="co">#&gt; 5 sadb     Southern Africa Radiocarbon Database</span></pre></div>
<p>The first argument to <code><a href="../reference/intchron.html">intchron()</a></code> should be a the ‘host’ code of the database you want to query, or a vector of hosts to query more than one (e.g. <code><a href="../reference/intchron.html">intchron(hosts = c("oxa", "nrcf"))</a></code>). For example, to return the entire South Africa Radiocarbon Database (‘sadb’):</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="../reference/intchron.html">intchron</a></span><span class="op">(</span><span class="st">"sadb"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2,575 x 23</span>
<span class="co">#&gt;    record_site record_country record_name record_longitude record_latitude</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;          &lt;chr&gt;                  &lt;dbl&gt;           &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Basinghall  Botswana       Basinghall              27.1           -23.5</span>
<span class="co">#&gt;  2 Basinghall  Botswana       Basinghall              27.1           -23.5</span>
<span class="co">#&gt;  3 Basinghall  Botswana       Basinghall              27.1           -23.5</span>
<span class="co">#&gt;  4 Basinghall  Botswana       Basinghall              27.1           -23.5</span>
<span class="co">#&gt;  5 Basinghall  Botswana       Basinghall              27.1           -23.5</span>
<span class="co">#&gt;  6 Basinghall  Botswana       Basinghall              27.1           -23.5</span>
<span class="co">#&gt;  7 Bisoli      Botswana       Bisoli                  27.6           -21.0</span>
<span class="co">#&gt;  8 Bisoli      Botswana       Bisoli                  27.6           -21.0</span>
<span class="co">#&gt;  9 Bobonong R… Botswana       Bobonong R…             28.8           -22.2</span>
<span class="co">#&gt; 10 Bosutswe    Botswana       Bosutswe                26.6           -22.0</span>
<span class="co">#&gt; # … with 2,565 more rows, and 18 more variables: series_type &lt;chr&gt;,</span>
<span class="co">#&gt; #   labcode &lt;chr&gt;, country &lt;chr&gt;, region &lt;chr&gt;, longitude &lt;dbl&gt;,</span>
<span class="co">#&gt; #   latitude &lt;dbl&gt;, site &lt;chr&gt;, sample &lt;chr&gt;, material &lt;chr&gt;, species &lt;chr&gt;,</span>
<span class="co">#&gt; #   d13C &lt;dbl&gt;, r_date &lt;int&gt;, r_date_sigma &lt;int&gt;, qual &lt;chr&gt;,</span>
<span class="co">#&gt; #   environment &lt;chr&gt;, context &lt;chr&gt;, period &lt;chr&gt;, subperiod &lt;chr&gt;</span></pre></div>
<p>You can further refine your query by specifying the locations you are interested in with the <code>countries</code> and <code>sites</code> parameters. Like <code>hosts</code>, these can also accept a vector of locations. For example, to download records from Jordan in the ORAU (<code>oxa</code>) and NERC-RF (<code>nrcf</code>) databases:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">jordan</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/intchron.html">intchron</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"oxa"</span>, <span class="st">"nrcf"</span><span class="op">)</span>, countries <span class="op">=</span> <span class="st">"Jordan"</span><span class="op">)</span>
<span class="va">jordan</span>
<span class="co">#&gt; # A tibble: 156 x 18</span>
<span class="co">#&gt;    record_site record_country record_name record_longitude record_latitude</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;          &lt;chr&gt;                  &lt;dbl&gt;           &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Araq ed-Du… Jordan         Araq ed-Du…             32.3            35.7</span>
<span class="co">#&gt;  2 Ayn Qasiyah Jordan         Ayn Qasiyah             36.8            31.8</span>
<span class="co">#&gt;  3 Ayn Qasiyah Jordan         Ayn Qasiyah             36.8            31.8</span>
<span class="co">#&gt;  4 Ayn Qasiyah Jordan         Ayn Qasiyah             36.8            31.8</span>
<span class="co">#&gt;  5 Ayn Qasiyah Jordan         Ayn Qasiyah             36.8            31.8</span>
<span class="co">#&gt;  6 Ayn Qasiyah Jordan         Ayn Qasiyah             36.8            31.8</span>
<span class="co">#&gt;  7 Azraq 31    Jordan         Azraq 31                36.8            31.8</span>
<span class="co">#&gt;  8 Azraq 31    Jordan         Azraq 31                36.8            31.8</span>
<span class="co">#&gt;  9 Azraq 31    Jordan         Azraq 31                36.8            31.8</span>
<span class="co">#&gt; 10 Burqu' 02   Jordan         Burqu' 02               37.8            32.7</span>
<span class="co">#&gt; # … with 146 more rows, and 13 more variables: series_type &lt;chr&gt;,</span>
<span class="co">#&gt; #   labcode &lt;chr&gt;, longitude &lt;dbl&gt;, latitude &lt;dbl&gt;, sample &lt;chr&gt;,</span>
<span class="co">#&gt; #   material &lt;chr&gt;, species &lt;chr&gt;, d13C &lt;dbl&gt;, r_date &lt;int&gt;,</span>
<span class="co">#&gt; #   r_date_sigma &lt;int&gt;, qual &lt;chr&gt;, F14C &lt;dbl&gt;, F14C_sigma &lt;dbl&gt;</span></pre></div>
</div>
<div id="working-with-intchron-records" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-intchron-records" class="anchor"></a>Working with IntChron records</h2>
<p>With the default setting <code>tabulate = TRUE</code>, <code><a href="../reference/intchron.html">intchron()</a></code> returns a table of records, ready for you to use in your analysis:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org">"dplyr"</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Summarise radiocarbon dates available from sites in Jordan</span>
<span class="va">jordan</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">labcode</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">record_site</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n_dates <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop_last"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 20 x 2</span>
<span class="co">#&gt;    record_site            n_dates</span>
<span class="co">#&gt;    &lt;chr&gt;                    &lt;int&gt;</span>
<span class="co">#&gt;  1 Araq ed-Dubb                 1</span>
<span class="co">#&gt;  2 Ayn Qasiyah                  5</span>
<span class="co">#&gt;  3 Azraq 31                     3</span>
<span class="co">#&gt;  4 Burqu' 02                    1</span>
<span class="co">#&gt;  5 Burqu' 03                    1</span>
<span class="co">#&gt;  6 Burqu' 27                    3</span>
<span class="co">#&gt;  7 Burqu' 35                    3</span>
<span class="co">#&gt;  8 Dahikiya, Badia Region       2</span>
<span class="co">#&gt;  9 Dhuweila                     4</span>
<span class="co">#&gt; 10 Kharaneh IV                  7</span>
<span class="co">#&gt; 11 Shuna Project               22</span>
<span class="co">#&gt; 12 Tell Abu Al-Kharaz          18</span>
<span class="co">#&gt; 13 Tell Abu en-Niaj             3</span>
<span class="co">#&gt; 14 Tell el-Hayyat               4</span>
<span class="co">#&gt; 15 Tell el-Hibr                 1</span>
<span class="co">#&gt; 16 Tell Hesban                  1</span>
<span class="co">#&gt; 17 Wadi Jilat                  11</span>
<span class="co">#&gt; 18 Wadi Jilat 13                1</span>
<span class="co">#&gt; 19 Wadi Jilat 22                2</span>
<span class="co">#&gt; 20 Wadi Jilat 25                1</span></pre></div>
<p>Note the use of <code><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct(labcode)</a></code> above. The data from IntChron usually requires some cleaning; for example, the ORAU and NERC-RF databases contain many duplicate radiocarbon dates. The <a href="https://docs.ropensci.org/c14bazAAR/">c14bazAAR</a> package <span class="citation">(Schmid, Seidensticker, and Hinz 2019)</span> includes many useful functions for tidying radiocarbon data.</p>
<p>You may find the <a href="http://stratigraphr.joeroe.io/">stratigraphr</a> and <a href="https://github.com/ahb108/rcarbon/">rcarbon</a> <span class="citation">(Crema and Bevan 2020)</span> packages useful for further analysis of radiocarbon dates in R.</p>
<p>In some situations you might want to access the full records returned by IntChron. Setting <code>tabulate = FALSE</code> will return the raw JSON responses as a named list. See <code>vignette("intchron-api")</code> for some tips on how to work with these objects.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-Bronk_Ramsey2019">
<p>Bronk Ramsey, Christopher, Maarten Blaauw, Rebecca Kearney, and Staff, Richard A Staff. 2019. “The Importance of Open Access to Chronological Information: The IntChron Initiative.” <em>Radiocarbon</em> 61 (5): 1–11. <a href="https://doi.org/10.1017/RDC.2019.21">https://doi.org/10.1017/RDC.2019.21</a>.</p>
</div>
<div id="ref-Crema2020">
<p>Crema, Enrico R, and Andrew Bevan. 2020. “Inference from Large Sets of Radiocarbon Dates: Software and Methods.” <em>Radiocarbon</em>, 1–17. <a href="https://doi.org/10.1017/RDC.2020.95">https://doi.org/10.1017/RDC.2020.95</a>.</p>
</div>
<div id="ref-Schmid2019">
<p>Schmid, Clemens, Dirk Seidensticker, and Martin Hinz. 2019. “c14bazAAR: An R Package for Downloading and Preparing C14 Dates from Different Source Databases.” <em>Journal of Open Source Software</em> 4 (43): 1914. <a href="https://doi.org/10.21105/joss.01914">https://doi.org/10.21105/joss.01914</a>.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>There are several reasons for this. First and foremost, it reduces the number of requests a given query has to make to the IntChron API. Querying all hosts isn’t usually necessary because IntChron indexes different types of database (e.g. radiocarbon dates from ORAU, palaeoclimate records from INTIMATE) which are rarely combined in a single analysis. Also, since IntChron is an indexing service, it is designed to include more databases over time, meaning analysis code that is not explicit about which hosts it needs is likely to break or at least become much less efficient in the future. But if you do need to, you can query all hosts by setting <code>host = "all"</code>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://joeroe.io">Joe Roe</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
